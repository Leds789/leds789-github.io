
### Project Goals

- To enhance overall knowledge and get exposure to malware infection technique and popular diagnosis and analysis tools used by people in the industry
- Learn the basics of malware infection tactics and Common indicators of Comprimise (IOCs)
- Investigate samples of malware 

### Tools 

- FlareVM
- Remnux
- Virtualbox
### Overview

- Setup an isolated malware analysis environment with malware analysis tools
- Create an immutable snapshot to restore environment after malware detonation.
### Topology

- Virtualbox running win10 enterprise

![[{9A644699-C3A5-42F1-8F7E-74747B723DE1}.png]]

### Step 1

- Created a win10 VM with an extra partitioned hard drive.
- We mounted a Guest additions ISO to the storage of the VM to run the Guest additions suite. This just adds drivers and updates to support performance and automated logins
- We disabled defender / Firewall using Group settings going into 

```Computer Config > Admin Templates > Windows Components > Microsoft Defender Antivirus > Turn off Defender```

```Computer Config > Admin Templates > Network > Network Connections > Windows Defender Firewall > Domain / Standard Profile > Disable Protect all networks in both```

- Created a snapshot here before installing flareVM

### Step 2

**Installing FlareVM / remnux 

- **https://github.com/mandiant/flare-vm
- https://remnux.org/

**Creating our own network in Virtual Box**


- Go to tools, Create new network
- Set ipv4 network as 10.0.0.1
- Set DHCP to Enabled, ensure networks are on the 10.0.0.x

**remnux

- cd /etc/inetsim
- sudo nano inetsim.conf
- Enable *Start service DNS 
- Change *Service Bind address to 0.0.0.0
- Change *DNS_default_ip to remnux box ip 10.0.0.4
- We had to manually change the Ip to 10.0.0.4 as it wouldn't automatically change unlike in the video. we did this by editing sudo nano /etc/netplan/01-netcfg.yaml 

- Change both VMs networks to the new 10.0.0.x network or network #3 in this case.
### Step 3

- Set the FlareVM DNS server to the remnux DNS IP @ 10.0.0.4 by going into adapter settings > Properties > ipv4 settings > properties 
- Set the Ipv4 address to 10.0.0.3 if it doesnt automattically change.
-  Ping test between both machines. 
- Create snapshots of both VMs. This is the startnig point to go back to after detonation.

This is now a set up malware lab. We will now learn how to use this lab using a case study malware the Zeus Banking malware. 

FlareVM allows us to run legacy malware in a controlled enviroment and with it connected to REMnux which allows us to study the malware. 


